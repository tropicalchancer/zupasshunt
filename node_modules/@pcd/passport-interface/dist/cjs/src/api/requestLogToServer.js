"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.requestLogToServer = void 0;
const url_join_1 = __importDefault(require("url-join"));
const constants_1 = require("./constants");
/**
 * Uploads a client-side-generated object to honeycomb. Used for
 * diagnosing client-side bugs.
 *
 * Never rejects.
 */
async function requestLogToServer(zupassServerUrl, eventName, value) {
    try {
        await fetch((0, url_join_1.default)(zupassServerUrl, "client-log"), {
            ...constants_1.POST,
            body: JSON.stringify({ name: eventName, ...value })
        });
    }
    catch (e) {
        console.log("failed to log event to server", e);
    }
}
exports.requestLogToServer = requestLogToServer;
